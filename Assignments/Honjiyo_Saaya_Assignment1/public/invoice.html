<script src="./product_data.js" type="text/javascript"></script>
<!-- From Lab12-->
<script>
    let params = (new URL(document.location)).searchParams;
    if(params.has("quantity_textbox")) {
        document.write('Thank you for ordering ${params.("quantity_textbox")} shoes!')
     } else {
            document.write('Please enter a quantity on the order page.')
        }
</script>
<!---->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purchase Details</title>
    <link rel="stylesheet" href="/Assignments/Honjiyo_Saaya_Assignment1/css/invoice.css">
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
</head>

<body>
    <h1>Thank you for choosing Saaya's Pointe Shoes!</h1>
<center>
    <table border="2" class="center">
<!-- From different Invoice WOD versions, modified -->
        <tbody>
            <tr>
                <th width="43%">Item</th>
                <th width="11%">Quantity</th>
                <th width="13%">Price</th>
                <th width="54%">Extended Price</th>
            </tr>
            <script>
                subtotal = 0; //start subtotal with 0

                //generate item rows for table
                for (i = 0; i < products.length; i++) {
                    if (quantities[i] > 0) {
                        //calculate extended price
                        extended_price = quantities[i] * products[i].price;
                        subtotal += extended_price;
                        //generate the product rows for table
                        document.write(`
                <tr>
                <td width="43%">${products[i].name}</td>
                <td align="center" width="11%">${quantity[i]}</td>
                <td width="13%">\$${products[i].price}</td>
                <td width="54%">\$${extended_price.toFixed(2)}</td>
                </tr>
                `);
                    }
                }
                //Tax
                var tax_rate = .045;
                var sales_tax = tax_rate * subtotal;

                //Discount
                var discount;
                if (subtotal > 200 && subtotal < 300) {
                    discount = 30;
                } else if (subtotal >= 300 && subtotal < 500) {
                    discount = 50;
                } else {
                    discount = subtotal * .25;
                }

                //Grand total
                var grand_total = subtotal + sales_tax - discount;
            </script>
            <tr>
                <td colspan="4" width="100%">&nbsp;</td>
            </tr>
            <tr>
                <td colspan="3" width="67%">Sub-total</td>
                <td width="54%">$
                    <script>
                        document.write(subtotal.toFixed(2));
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="3" width="67%">Tax @ 4%
                </td>
                <td width="4%">$
                    <script>
                        document.write(sales_tax.toFixed(2));
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="3" width="67%">Online Order Discount</td>
                <td width="54%">$
                    <script>
                        document.write(discount.toFixed(2));
                    </script>
                </td>
            </tr>
            <tr>
                <td colspan="3" width="67%"><strong>Total</strong></td>
                <td width="54%"><b>$
                        <script>document.write(grand_total.toFixed(2));</script>
                    </b></td>
            </tr>
        </tbody>
    </table>
</center>
    <p>
        <b>Saaya's Pointe Shoes offers a special online discount!</b> <br> A subtotal between $200 and $300 will
        include a $250 discount. <br> A subtotal between $30 and $500 will include a $50 discount. <br> Subtotals over
        $500 will include a 25% discount.
    </p>
    <input type="button" name="toProductsPage" value="Order More!"
    onclick="window.location.href ='./pointeshoes.html'">
</body>

</html>

</body>

</html>